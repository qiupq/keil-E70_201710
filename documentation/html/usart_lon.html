<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SAME70 Xplained Software Package: USART LON example with DMA</title>
<link href="common/style.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
    <div id="body">
        <div id="title">  SAME70 Xplained Software Package 1.5</div>
        <div id="banner"></div>

<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="page_examples.html">Examples for SAME7 Xplained</a>      </li>
      <li><a class="el" href="page_examples_basic.html">Basic Examples</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>USART LON example with DMA </h1>  </div>
</div>
<div class="contents">
<p>This example demonstrates the LON mode provided by the USART peripherals on SAMV7 Microcontrollers.</p>
<h2><a class="anchor" id="Requirements"></a>
Requirements</h2>
<p>This package can be used with SAMV71 Xplained Ultra board or SAME70 Xplained board. Before running, make sure to connect two boards with RS485 lines. The rs485 adapt board (ADM3485ARZ) for this purpose. Match each paired pins of two boards respectively with A to A, B to B and FGND to FGND(the central pin of J3). this part is connect with EK and ADM3485ARZ</p>
<ul>
<li><b>Board 1 Board 2</b></li>
<li>TXD1(J507 pin28, D47) &lt;-&gt;DI TXD1(J507 pin28, D47) &lt;-&gt;DI</li>
<li>RXD1(J507 pin27, D46) &lt;-&gt;RO RXD1(J507 pin27, D46) &lt;-&gt;RO</li>
<li>RTS1(J507 pin26, D45) &lt;-&gt;DE RTS1(J507 pin26, D45) &lt;-&gt;DE</li>
<li>CTS1(J507 pin25, D44) &lt;-&gt;RE CTS1(J507 pin25, D44) &lt;-&gt;RE</li>
<li>3.3v 3.3v</li>
<li>GND GND this part is connect with 2 ADM3485ARZ A &lt;--------------------&gt; A B &lt;--------------------&gt; B PGND &lt;--------------------&gt; PGND</li>
</ul>
<h2><a class="anchor" id="Description"></a>
Description</h2>
<p>This example connects two boards through RS485 interface to show how to use USART in LON (local operating network) mode. One of the board acts as the transmitter and the other one as the receiver. It is determined by the sequence the two applications started.</p>
<h2><a class="anchor" id="Usage"></a>
Usage</h2>
<ol type="1">
<li>Build the program and download it inside the board. Please refer to the Getting Started with SAM V71/E70 Microcontrollers.pdf</li>
<li>Connect a serial cable to the UART4 port (J505 Pin3 D18 and Pin4 D19) on the evaluation kit.</li>
<li>On the computer, open and configure a terminal application for each board (e.g. HyperTerminal on Microsoft Windows) with these settings:<ul>
<li>115200 baud rate</li>
<li>8 bits of data</li>
<li>No parity</li>
<li>1 stop bit</li>
<li>No flow control</li>
</ul>
</li>
<li>Start application from two boards in sequence. Make sure the second board should NOT be started unless the first board had run to wait for the synchronizing character. The output message in later section would describe this.</li>
</ol>
<ol type="1">
<li>In the terminal window, the following text should appear (values depend on the board and chip used): <div class="fragment"><pre class="fragment">     -- <a class="code" href="examples_2usart__7816_2main_8c.html#ac851cdac87c607e7a5284828d5862c72">USART</a> LON Mode Example xxx --
     -- SAMxxxxx-xx
     -- Compiled: xxx xx xxxx xx:xx:xx --
</pre></div></li>
</ol>
<h2><a class="anchor" id="References"></a>
References</h2>
<ul>
<li><a class="el" href="examples_2usart__lon_2main_8c.html">usart_lon/main.c</a></li>
<li><a class="el" href="pio_8h.html">pio.h</a></li>
<li><a class="el" href="usart_8h.html">usart.h</a> </li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
